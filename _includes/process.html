<section id="process" class="mx-auto my-48 w-4/5">
  <h2 class="text-7xl lg:text-5xl text-center w-4/5 mx-auto font-bold mb-12">Notre manière de fonctionner</h2>

  <ul
    class="timeline timeline-snap-icon max-md:timeline-compact timeline-vertical"
  >
    <li>
      <div class="timeline-middle">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          class="h-5 w-5"
        >
          <path
            fill-rule="evenodd"
            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z"
            clip-rule="evenodd"
          />
        </svg>
      </div>
      <div class="timeline-start mb-10 md:text-end text-3xl">
        <time class="font-mono italic text-4xl">1ère étape</time>
        <div class="font-black text-4xl">Découverte de votre besoin</div>
        Nous commençons par plonger dans votre univers afin de cerner vos enjeux
        et objectifs spécifiques. Ce diagnostic approfondi nous permet de
        définir ensemble les priorités de votre projet et de poser les bases
        d’une stratégie sur-mesure.
      </div>
      <hr />
    </li>
    <li>
      <hr />
      <div class="timeline-middle">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          class="h-5 w-5"
        >
          <path
            fill-rule="evenodd"
            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z"
            clip-rule="evenodd"
          />
        </svg>
      </div>
      <div class="timeline-end md:mb-10 text-3xl">
        <time class="font-mono italic text-4xl">2ème étape</time>
        <div class="text-4xl font-black">Production de votre nouveau site</div>
        Nos experts allient créativité et savoir-faire technique pour
        transformer votre vision en un site web moderne et performant. Chaque
        élément est pensé pour renforcer votre image de marque et offrir une
        expérience utilisateur optimale, de la maquette initiale à la
        réalisation finale.
      </div>
      <hr />
    </li>
    <li>
      <hr />
      <div class="timeline-middle">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          class="h-5 w-5"
        >
          <path
            fill-rule="evenodd"
            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z"
            clip-rule="evenodd"
          />
        </svg>
      </div>
      <div class="timeline-start mb-10 md:text-end text-3xl">
        <time class="font-mono italic text-4xl">3ème étape</time>
        <div class="font-black text-4xl">
          Mise en ligne de votre nouvel outil de conversion
        </div>
        Nous assurons une mise en ligne rigoureuse, avec des tests poussés pour
        garantir que votre nouvel outil convertisse efficacement vos visiteurs
        en clients. Ce déploiement soigné marque le début d’une nouvelle ère
        dans votre stratégie digitale, prêt à booster votre performance
        commerciale.
      </div>
      <hr />
    </li>
  </ul>
</section>

<style>
.timeline > li {
  opacity: 0;
  transform: translateY(30px); /* Start slightly lower */
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}

.timeline > li.is-visible {
  opacity: 1;
  transform: translateY(0);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const timelineItems = document.querySelectorAll('#process .timeline > li');

  if (!timelineItems.length) return; // Exit if no items found

  const observerCallback = (entries, observer) => {
    entries.forEach((entry, index) => {
      if (entry.isIntersecting) {
        // Find the actual index relative to its siblings for consistent delay
        const itemIndex = Array.from(entry.target.parentNode.children).indexOf(entry.target);
        // Apply a staggered delay
        entry.target.style.transitionDelay = `${itemIndex * 150}ms`;
        entry.target.classList.add('is-visible');
        observer.unobserve(entry.target); // Stop observing once visible
      }
    });
  };

  const observerOptions = {
    root: null, // Use the viewport as the root
    rootMargin: '0px 0px -50px 0px', // Trigger slightly before element is fully in view
    threshold: 0.1 // Trigger when 10% of the element is visible
  };

  const observer = new IntersectionObserver(observerCallback, observerOptions);

  timelineItems.forEach(item => {
    observer.observe(item);
  });
});
</script>
