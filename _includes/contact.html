<section id="contact" class="mx-auto my-48 w-3/4">
  <div class="divider lg:text-2xl text-3xl">Contacte</div>
  <!-- Start of Selection -->
  <div class="bg-base-200 p-6 sm:p-8 lg:p-10 rounded-lg shadow-lg">
    <div class="flex flex-col items-center gap-6 sm:gap-8 lg:flex-row">
      <!-- Texte d'accroche -->
      <div class="w-full lg:w-1/2 text-center lg:text-left">
        <h2 class="text-3xl sm:text-4xl lg:text-6xl font-extrabold text-primary-content mb-4">
          Transformez votre site en véritable aimant à clients
        </h2>
        <p class="text-base sm:text-lg lg:text-xl text-base-content">
          Vous avez une idée ou un projet à concrétiser ? Profitez d'un accompagnement sur‑mesure dès maintenant.
        </p>
      </div>
      <!-- Formulaire -->
      <form
        class="w-full lg:w-1/2 bg-base-100 p-6 sm:p-8 rounded-lg shadow-md space-y-4"
        method="post"
        action="https://n8n.srv756802.hstgr.cloud/webhook-test/contact"
      >
        <h3 class="text-xl sm:text-2xl font-semibold text-base-content">
          Contactez-nous
        </h3>
        <div>
          <label for="name" class="block text-sm font-medium text-base-content">
            Votre nom
          </label>
          <input
            id="name"
            name="name"
            type="text"
            required
            placeholder="John Doe"
            class="w-full border border-base-300 bg-base-100 text-base-content placeholder-base-content rounded-md px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary"
          />
        </div>
        <div>
          <label for="email" class="block text-sm font-medium text-base-content">
            Votre email
          </label>
          <input
            id="email"
            name="email"
            type="email"
            required
            placeholder="nom@entreprise.com"
            class="w-full border border-base-300 bg-base-100 text-base-content placeholder-base-content rounded-md px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary"
          />
        </div>
        <div>
          <label for="website" class="block text-sm font-medium text-base-content">
            Votre site web (optionnel)
          </label>
          <input
            id="website"
            name="website"
            type="url"
            placeholder="https://entreprise.com"
            class="w-full border border-base-300 bg-base-100 text-base-content placeholder-base-content rounded-md px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary"
          />
        </div>
        <div>
          <label for="message" class="block text-sm font-medium text-base-content">
            Votre message
          </label>
          <textarea
            id="message"
            name="message"
            rows="4"
            maxlength="5000"
            placeholder="Décrivez votre situation actuelle et vos objectifs"
            class="w-full border border-base-300 bg-base-100 text-base-content placeholder-base-content rounded-md px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary"
          ></textarea>
        </div>
        <button
          type="submit"
          class="btn btn-primary w-full py-4 mt-4 font-medium"
        >
          Envoyer
        </button>
      </form>
    </div>
  </div>
  <!-- End of Selection -->
  <div class="mt-48 mockup-browser border border-base-300 w-full">
    <div class="mockup-browser-toolbar">
      <div class="input">
        <a href="https://www.linkedin.com/in/tino-pianfetti-069872315/"
          >https://mon_LinkedIn/</a
        >
      </div>
    </div>
    <div
      class="hero h-96 bg-cover bg-center"
      style="background-image: url('{{ '/assets/images/tino_working.webp' | relative_url }}');"
    >
      <div class="hero-content text-primary-content text-center">
        <a
          href="https://www.linkedin.com/in/tino-pianfetti-069872315/"
          target="_blank"
          rel="noopener"
          class="text-4xl btn-xl lg:btn-sm lg:text-base btn btn-primary w-fit self-center lg:self-start"
        >
          Me retrouver sur LinkedIn
        </a>
      </div>
    </div>
  </div>
</section>

<dialog id="modal_success" class="modal">
  <div class="modal-box bg-base-100 text-base-content">
    <h3 class="text-3xl lg:text-lg font-bold">✅ Message envoyé !</h3>
    <p class="text-2xl lg:text-base py-4">
      Merci pour votre message. Nous vous répondrons rapidement.
    </p>
  </div>
  <form method="dialog" class="modal-backdrop">
    <button>Fermer</button>
  </form>
</dialog>

<dialog id="modal_error" class="modal">
  <div class="modal-box bg-base-100 text-base-content">
    <h3 class="text-3xl lg:text-lg font-bold">❌ Erreur d'envoi</h3>
    <p class="text-2xl lg:text-base py-4">Une erreur s'est produite. Veuillez réessayer plus tard.</p>
  </div>
  <form method="dialog" class="modal-backdrop">
    <button>Fermer</button>
  </form>
</dialog>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form"); // Target your actual form
    const modalSuccess = document.getElementById("modal_success");
    const modalError = document.getElementById("modal_error");

    form.addEventListener("submit", async function (e) {
      e.preventDefault();

      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      try {
        const response = await fetch(form.action, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        });

        if (response.ok) {
          modalSuccess.showModal();
          form.reset(); // optional: clear form
        } else {
          modalError.showModal();
        }
      } catch (err) {
        modalError.showModal();
      }
    });
  });
</script>
